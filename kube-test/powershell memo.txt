PS C:\Users\wan> cd C:\dev\kube-test
PS C:\dev\kube-test> kubectl version
Client Version: v1.33.2
Kustomize Version: v5.6.0
Server Version: v1.33.2+k3s1
PS C:\dev\kube-test>
PS C:\dev\kube-test> kubectl completion powershell | Out-String | Invoke-Expression
PS C:\dev\kube-test> kubectl completion powershell >> $PROFILE
PS C:\dev\kube-test> kubectl describe po nginx-pod
Name:             nginx-pod
Namespace:        default
Priority:         0
Service Account:  default
Node:             desktop-hk77bco/192.168.127.2
Start Time:       Thu, 24 Jul 2025 11:08:27 +0900
Labels:           app=nginx
Annotations:      <none>
Status:           Running
IP:               10.42.0.208
IPs:
  IP:  10.42.0.208
Containers:
  nginx-container:
    Container ID:   docker://56065d3e23d81450b7a12b572648f3e266a571f6cb88d4b84633bf1d86524e67
    Image:          nginx:latest
    Image ID:       docker-pullable://nginx@sha256:84ec966e61a8c7846f509da7eb081c55c1d56817448728924a87ab32f12a72fb
    Port:           80/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Thu, 24 Jul 2025 11:08:39 +0900
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-t7l58 (ro)
Conditions:
  Type                        Status
  PodReadyToStartContainers   True
  Initialized                 True
  Ready                       True
  ContainersReady             True
  PodScheduled                True
Volumes:
  kube-api-access-t7l58:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    Optional:                false
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:                      <none>
PS C:\dev\kube-test>
PS C:\dev\kube-test> kubectl exec -it nginx-pod -n default -- sh
# exit
PS C:\dev\kube-test>
PS C:\dev\kube-test> kubectl apply -f nginx-svc.yaml
service/nginx-service created
PS C:\dev\kube-test> kubectl get all
NAME            READY   STATUS    RESTARTS   AGE
pod/nginx-pod   1/1     Running   0          146m

NAME                    TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)        AGE
service/kubernetes      ClusterIP   10.43.0.1     <none>        443/TCP        160d
service/nginx-service   NodePort    10.43.8.140   <none>        80:30000/TCP   26s
PS C:\dev\kube-test>
PS C:\dev\kube-test> kubectl describe svc nginx-service
Name:                     nginx-service
Namespace:                default
Labels:                   <none>
Annotations:              <none>
Selector:                 app=nginx
Type:                     NodePort
IP Family Policy:         SingleStack
IP Families:              IPv4
IP:                       10.43.8.140
IPs:                      10.43.8.140
Port:                     <unset>  80/TCP
TargetPort:               80/TCP
NodePort:                 <unset>  30000/TCP
Endpoints:                10.42.0.208:80
Session Affinity:         None
External Traffic Policy:  Cluster
Internal Traffic Policy:  Cluster
Events:                   <none>
PS C:\dev\kube-test> kubectl apply -f nginx-rs.yaml
replicaset.apps/nginx-replicaset created
PS C:\dev\kube-test> kubectl get pod
NAME                     READY   STATUS    RESTARTS   AGE
nginx-pod                1/1     Running   0          155m
nginx-replicaset-n44wv   1/1     Running   0          13s
nginx-replicaset-sfmts   1/1     Running   0          13s
PS C:\dev\kube-test> kubectl apply -f nginx-rs.yaml
replicaset.apps/nginx-replicaset created
PS C:\dev\kube-test> kubectl delete pod nginx-pod
pod "nginx-pod" deleted
PS C:\dev\kube-test> kubectl get pod
NAME                     READY   STATUS    RESTARTS   AGE
nginx-replicaset-n44wv   1/1     Running   0          2m1s
nginx-replicaset-sfmts   1/1     Running   0          2m1s
nginx-replicaset-sq8nl   1/1     Running   0          6s
PS C:\dev\kube-test>
PS C:\dev\kube-test> kubectl logs nginx-replicaset-sfmts
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
2025/07/24 04:43:44 [notice] 1#1: using the "epoll" event method
2025/07/24 04:43:44 [notice] 1#1: nginx/1.29.0
2025/07/24 04:43:44 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14+deb12u1)
2025/07/24 04:43:44 [notice] 1#1: OS: Linux 6.6.87.2-microsoft-standard-WSL2
2025/07/24 04:43:44 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
2025/07/24 04:43:44 [notice] 1#1: start worker processes
2025/07/24 04:43:44 [notice] 1#1: start worker process 29
2025/07/24 04:43:44 [notice] 1#1: start worker process 30
2025/07/24 04:43:44 [notice] 1#1: start worker process 31
2025/07/24 04:43:44 [notice] 1#1: start worker process 32
2025/07/24 04:43:44 [notice] 1#1: start worker process 33
2025/07/24 04:43:44 [notice] 1#1: start worker process 34
2025/07/24 04:43:44 [notice] 1#1: start worker process 35
2025/07/24 04:43:44 [notice] 1#1: start worker process 36
2025/07/24 04:43:44 [notice] 1#1: start worker process 37
2025/07/24 04:43:44 [notice] 1#1: start worker process 38
2025/07/24 04:43:44 [notice] 1#1: start worker process 39
2025/07/24 04:43:44 [notice] 1#1: start worker process 40
2025/07/24 04:43:44 [notice] 1#1: start worker process 41
2025/07/24 04:43:44 [notice] 1#1: start worker process 42
2025/07/24 04:43:44 [notice] 1#1: start worker process 43
2025/07/24 04:43:44 [notice] 1#1: start worker process 44
10.42.0.1 - - [24/Jul/2025:04:46:38 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36" "-"
PS C:\dev\kube-test> kubectl logs nginx-replicaset-sq8nl
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
2025/07/24 04:45:39 [notice] 1#1: using the "epoll" event method
2025/07/24 04:45:39 [notice] 1#1: nginx/1.29.0
2025/07/24 04:45:39 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14+deb12u1)
2025/07/24 04:45:39 [notice] 1#1: OS: Linux 6.6.87.2-microsoft-standard-WSL2
2025/07/24 04:45:39 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576
2025/07/24 04:45:39 [notice] 1#1: start worker processes
2025/07/24 04:45:39 [notice] 1#1: start worker process 29
2025/07/24 04:45:39 [notice] 1#1: start worker process 30
2025/07/24 04:45:39 [notice] 1#1: start worker process 31
2025/07/24 04:45:39 [notice] 1#1: start worker process 32
2025/07/24 04:45:39 [notice] 1#1: start worker process 33
2025/07/24 04:45:39 [notice] 1#1: start worker process 34
2025/07/24 04:45:39 [notice] 1#1: start worker process 35
2025/07/24 04:45:39 [notice] 1#1: start worker process 36
2025/07/24 04:45:39 [notice] 1#1: start worker process 37
2025/07/24 04:45:39 [notice] 1#1: start worker process 38
2025/07/24 04:45:39 [notice] 1#1: start worker process 39
2025/07/24 04:45:39 [notice] 1#1: start worker process 40
2025/07/24 04:45:39 [notice] 1#1: start worker process 41
2025/07/24 04:45:39 [notice] 1#1: start worker process 42
2025/07/24 04:45:39 [notice] 1#1: start worker process 43
2025/07/24 04:45:39 [notice] 1#1: start worker process 44
PS C:\dev\kube-test>
PS C:\dev\kube-test>
PS C:\dev\kube-test>
PS C:\dev\kube-test> kubectl apply -f nginx-deploy.yaml
deployment.apps/nginx-deployment created
service/nginx-service unchanged
PS C:\dev\kube-test> kubectl get pod
NAME                     READY   STATUS    RESTARTS   AGE
nginx-replicaset-n44wv   1/1     Running   0          37m
nginx-replicaset-sfmts   1/1     Running   0          37m
nginx-replicaset-sq8nl   1/1     Running   0          35m
PS C:\dev\kube-test> kubectl get all
NAME                         READY   STATUS    RESTARTS   AGE
pod/nginx-replicaset-n44wv   1/1     Running   0          37m
pod/nginx-replicaset-sfmts   1/1     Running   0          37m
pod/nginx-replicaset-sq8nl   1/1     Running   0          35m

NAME                    TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)        AGE
service/kubernetes      ClusterIP   10.43.0.1     <none>        443/TCP        160d
service/nginx-service   NodePort    10.43.8.140   <none>        80:30000/TCP   47m

NAME                               READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/nginx-deployment   3/3     3            3           15s

NAME                               DESIRED   CURRENT   READY   AGE
replicaset.apps/nginx-replicaset   3         3         3       37m
PS C:\dev\kube-test>
PS C:\dev\kube-test> kubectl describe deployments.apps nginx-deployment
Name:                   nginx-deployment
Namespace:              default
CreationTimestamp:      Thu, 24 Jul 2025 14:21:05 +0900
Labels:                 app=nginx
Annotations:            deployment.kubernetes.io/revision: 1
Selector:               app=nginx
Replicas:               3 desired | 3 updated | 3 total | 3 available | 0 unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        0
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:  app=nginx
  Containers:
   nginx-container:
    Image:         nginx:latest
    Port:          80/TCP
    Host Port:     0/TCP
    Environment:   <none>
    Mounts:        <none>
  Volumes:         <none>
  Node-Selectors:  <none>
  Tolerations:     <none>
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    NewReplicaSetAvailable
OldReplicaSets:  <none>
NewReplicaSet:   nginx-replicaset (3/3 replicas created)
Events:          <none>
PS C:\dev\kube-test>

